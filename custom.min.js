"use strict";function calcAge(e,a,t){var r=new Date,n=r.getFullYear(),o=r.getMonth(),s=r.getDate(),l=n-e;return o<a-1&&l--,a-1==o&&s<t&&l--,l}function getDate(){var e,a,t,r=new Date,n=r.getDate().toString(),o={fulldate:"",codigo:""};1==n.length&&(n=0+n);var s=(r.getMonth()+1).toString();return 1==s.length&&(s=0+s),e=r.getHours()+1,a=r.getMinutes()+1,t=r.getSeconds()+1,o.fulldate=n+"/"+s+"/"+r.getFullYear(),o.codigo=r.getFullYear()+s+n+e+a+t,o}$(document).ready(function(){var e=getDate();$("#dtsol").val(e.fulldate),$("#codsol").val(e.codigo),$("#cpf").mask("999.999.999.99",{reverse:!0}),$("#cep").mask("99999-999",{reverse:!0}),$("#celphone").on("keydown",function(){var e=$(this).val();1==e.length&&$(this).val("("+e),3==e.length&&$(this).val(e+")"),8==e.length&&$(this).val(e+"-")});FLUIGC.calendar("#dtnasc",{pickDate:!0,pickTime:!1,useMinutes:!1,useSeconds:!1,useCurrent:!0,minuteStepping:1,maxDate:e.fulldate,showToday:!0,language:"pt-br",useStrict:!1,sideBySide:!1});$("#dtnasc").on("change",function(){var e,a=$(this).val();(e=calcAge((a=a.split("/"))[2],a[1],a[0]))<18?(alert("Voce deve ter no mínimo 18 anos"),$(this).parent().addClass("has-error"),$(this).focus()):($("#age").val(e),$(this).parent().removeClass("has-error"))}),$("#cep").on("focusout",function(){var e=$(this).val().replace("-","");$("#cep").parent().removeClass("has-warning"),$("#cep").parent().removeClass("has-error"),$.ajax({method:"GET",url:"http://viacep.com.br/ws/"+e+"/json/"}).done(function(e){console.log("cep: ",e),e.erro&&(alert("Digite um CEP válido!"),$("#cep").parent().addClass("has-error")),$("#county").val(e.bairro),$("#state").val(e.uf),$("#city").val(e.localidade),$("#address").val(e.logradouro)}).fail(function(){alert("Erro ao consultar o CEP, tente novamente mais tarde!"),$("#cep").parent().addClass("has-warning")})})});